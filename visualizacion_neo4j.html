
<!DOCTYPE html>
<html>
<head>
    <title>Visualización Grafo Neo4J - Terrazas Madrid</title>
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        #network { width: 100%; height: 600px; border: 1px solid #ccc; }
        .info { margin-bottom: 20px; padding: 10px; background: #f5f5f5; }
        .legend { margin-top: 20px; }
        .legend-item { display: inline-block; margin-right: 20px; }
        .legend-color { width: 20px; height: 20px; display: inline-block; margin-right: 5px; }
    </style>
</head>
<body>
    <h1>Visualización del Grafo Neo4J - Terrazas Madrid</h1>
    
    <div class="info">
        <h3>Modelo de Datos:</h3>
        <p><strong>Distrito</strong> → <strong>Barrio</strong> → <strong>Local</strong> → <strong>Terraza</strong></p>
        <p>Total de nodos: 81 | Total de relaciones: 80</p>
        <p><small>Generado: 16/7/2025, 2:23:37 a.m.</small></p>
    </div>

    <div id="network"></div>

    <div class="legend">
        <h3>Leyenda:</h3>
        <div class="legend-item">
            <span class="legend-color" style="background-color: #ff6b6b;"></span>
            <span>Distrito</span>
        </div>
        <div class="legend-item">
            <span class="legend-color" style="background-color: #4ecdc4;"></span>
            <span>Barrio</span>
        </div>
        <div class="legend-item">
            <span class="legend-color" style="background-color: #45b7d1;"></span>
            <span>Local</span>
        </div>
        <div class="legend-item">
            <span class="legend-color" style="background-color: #66bb6a;"></span>
            <span>Terraza Normal</span>
        </div>
        <div class="legend-item">
            <span class="legend-color" style="background-color: #ffa726;"></span>
            <span>Terraza a Inspeccionar</span>
        </div>
    </div>

    <script>
        // Prevenir múltiples instancias
        if (window.grafoActual) {
            console.log('Destruyendo grafo anterior');
            window.grafoActual.destroy();
        }
        
        // Generar timestamp único para evitar cache
        const timestamp = new Date().toISOString();
        console.log('Generando grafo único:', timestamp);
        
        const nodes = new vis.DataSet([{"id":"distrito_ARGANZUELA","label":"ARGANZUELA","color":"#ff6b6b","size":20,"type":"Distrito"},{"id":"barrio_ARGANZUELA_CHOPERA","label":"CHOPERA","color":"#4ecdc4","size":15,"type":"Barrio"},{"id":"local_ARGANZUELA_CHOPERA_132","label":"Local 132","color":"#45b7d1","size":10,"type":"Local"},{"id":"terraza_ARGANZUELA_CHOPERA_132","label":"Terraza No especificado","color":"#66bb6a","size":8,"type":"Terraza"},{"id":"local_ARGANZUELA_CHOPERA_11","label":"Local 11","color":"#45b7d1","size":10,"type":"Local"},{"id":"terraza_ARGANZUELA_CHOPERA_11","label":"Terraza No especificado","color":"#66bb6a","size":8,"type":"Terraza"},{"id":"local_ARGANZUELA_CHOPERA_15","label":"Local 15","color":"#45b7d1","size":10,"type":"Local"},{"id":"terraza_ARGANZUELA_CHOPERA_15","label":"Terraza No especificado","color":"#66bb6a","size":8,"type":"Terraza"},{"id":"local_ARGANZUELA_CHOPERA_29","label":"Local 29","color":"#45b7d1","size":10,"type":"Local"},{"id":"terraza_ARGANZUELA_CHOPERA_29","label":"Terraza No especificado","color":"#66bb6a","size":8,"type":"Terraza"},{"id":"local_ARGANZUELA_CHOPERA_1","label":"Local 1","color":"#45b7d1","size":10,"type":"Local"},{"id":"terraza_ARGANZUELA_CHOPERA_1","label":"Terraza No especificado","color":"#66bb6a","size":8,"type":"Terraza"},{"id":"local_ARGANZUELA_CHOPERA_75","label":"Local 75","color":"#45b7d1","size":10,"type":"Local"},{"id":"terraza_ARGANZUELA_CHOPERA_75","label":"Terraza No especificado","color":"#66bb6a","size":8,"type":"Terraza"},{"id":"local_ARGANZUELA_CHOPERA_18","label":"Local 18","color":"#45b7d1","size":10,"type":"Local"},{"id":"terraza_ARGANZUELA_CHOPERA_18","label":"Terraza No especificado","color":"#66bb6a","size":8,"type":"Terraza"},{"id":"local_ARGANZUELA_CHOPERA_2","label":"Local 2","color":"#45b7d1","size":10,"type":"Local"},{"id":"terraza_ARGANZUELA_CHOPERA_2","label":"Terraza No especificado","color":"#66bb6a","size":8,"type":"Terraza"},{"id":"local_ARGANZUELA_CHOPERA_5","label":"Local 5","color":"#45b7d1","size":10,"type":"Local"},{"id":"terraza_ARGANZUELA_CHOPERA_5","label":"Terraza No especificado","color":"#66bb6a","size":8,"type":"Terraza"},{"id":"local_ARGANZUELA_CHOPERA_53","label":"Local 53","color":"#45b7d1","size":10,"type":"Local"},{"id":"terraza_ARGANZUELA_CHOPERA_53","label":"Terraza No especificado","color":"#66bb6a","size":8,"type":"Terraza"},{"id":"local_ARGANZUELA_CHOPERA_19","label":"Local 19","color":"#45b7d1","size":10,"type":"Local"},{"id":"terraza_ARGANZUELA_CHOPERA_19","label":"Terraza No especificado","color":"#66bb6a","size":8,"type":"Terraza"},{"id":"local_ARGANZUELA_CHOPERA_124","label":"Local 124","color":"#45b7d1","size":10,"type":"Local"},{"id":"terraza_ARGANZUELA_CHOPERA_124","label":"Terraza No especificado","color":"#66bb6a","size":8,"type":"Terraza"},{"id":"local_ARGANZUELA_CHOPERA_134","label":"Local 134","color":"#45b7d1","size":10,"type":"Local"},{"id":"terraza_ARGANZUELA_CHOPERA_134","label":"Terraza No especificado","color":"#66bb6a","size":8,"type":"Terraza"},{"id":"local_ARGANZUELA_CHOPERA_65","label":"Local 65","color":"#45b7d1","size":10,"type":"Local"},{"id":"terraza_ARGANZUELA_CHOPERA_65","label":"Terraza No especificado","color":"#66bb6a","size":8,"type":"Terraza"},{"id":"local_ARGANZUELA_CHOPERA_42","label":"Local 42","color":"#45b7d1","size":10,"type":"Local"},{"id":"terraza_ARGANZUELA_CHOPERA_42","label":"Terraza No especificado","color":"#66bb6a","size":8,"type":"Terraza"},{"id":"local_ARGANZUELA_CHOPERA_21","label":"Local 21","color":"#45b7d1","size":10,"type":"Local"},{"id":"terraza_ARGANZUELA_CHOPERA_21","label":"Terraza No especificado","color":"#66bb6a","size":8,"type":"Terraza"},{"id":"barrio_ARGANZUELA_PALOS DE MOGUER","label":"PALOS DE MOGUER","color":"#4ecdc4","size":15,"type":"Barrio"},{"id":"local_ARGANZUELA_PALOS DE MOGUER_28","label":"Local 28","color":"#45b7d1","size":10,"type":"Local"},{"id":"terraza_ARGANZUELA_PALOS DE MOGUER_28","label":"Terraza No especificado","color":"#66bb6a","size":8,"type":"Terraza"},{"id":"local_ARGANZUELA_PALOS DE MOGUER_65","label":"Local 65","color":"#45b7d1","size":10,"type":"Local"},{"id":"terraza_ARGANZUELA_PALOS DE MOGUER_65","label":"Terraza No especificado","color":"#66bb6a","size":8,"type":"Terraza"},{"id":"local_ARGANZUELA_PALOS DE MOGUER_10","label":"Local 10","color":"#45b7d1","size":10,"type":"Local"},{"id":"terraza_ARGANZUELA_PALOS DE MOGUER_10","label":"Terraza No especificado","color":"#66bb6a","size":8,"type":"Terraza"},{"id":"local_ARGANZUELA_PALOS DE MOGUER_4","label":"Local 4","color":"#45b7d1","size":10,"type":"Local"},{"id":"terraza_ARGANZUELA_PALOS DE MOGUER_4","label":"Terraza No especificado","color":"#66bb6a","size":8,"type":"Terraza"},{"id":"local_ARGANZUELA_PALOS DE MOGUER_63","label":"Local 63","color":"#45b7d1","size":10,"type":"Local"},{"id":"terraza_ARGANZUELA_PALOS DE MOGUER_63","label":"Terraza No especificado","color":"#66bb6a","size":8,"type":"Terraza"},{"id":"local_ARGANZUELA_PALOS DE MOGUER_2","label":"Local 2","color":"#45b7d1","size":10,"type":"Local"},{"id":"terraza_ARGANZUELA_PALOS DE MOGUER_2","label":"Terraza No especificado","color":"#66bb6a","size":8,"type":"Terraza"},{"id":"local_ARGANZUELA_PALOS DE MOGUER_12","label":"Local 12","color":"#45b7d1","size":10,"type":"Local"},{"id":"terraza_ARGANZUELA_PALOS DE MOGUER_12","label":"Terraza No especificado","color":"#66bb6a","size":8,"type":"Terraza"},{"id":"local_ARGANZUELA_PALOS DE MOGUER_14","label":"Local 14","color":"#45b7d1","size":10,"type":"Local"},{"id":"terraza_ARGANZUELA_PALOS DE MOGUER_14","label":"Terraza No especificado","color":"#66bb6a","size":8,"type":"Terraza"},{"id":"local_ARGANZUELA_PALOS DE MOGUER_50","label":"Local 50","color":"#45b7d1","size":10,"type":"Local"},{"id":"terraza_ARGANZUELA_PALOS DE MOGUER_50","label":"Terraza No especificado","color":"#66bb6a","size":8,"type":"Terraza"},{"id":"local_ARGANZUELA_PALOS DE MOGUER_32","label":"Local 32","color":"#45b7d1","size":10,"type":"Local"},{"id":"terraza_ARGANZUELA_PALOS DE MOGUER_32","label":"Terraza No especificado","color":"#66bb6a","size":8,"type":"Terraza"},{"id":"local_ARGANZUELA_PALOS DE MOGUER_38","label":"Local 38","color":"#45b7d1","size":10,"type":"Local"},{"id":"terraza_ARGANZUELA_PALOS DE MOGUER_38","label":"Terraza No especificado","color":"#66bb6a","size":8,"type":"Terraza"},{"id":"local_ARGANZUELA_PALOS DE MOGUER_23","label":"Local 23","color":"#45b7d1","size":10,"type":"Local"},{"id":"terraza_ARGANZUELA_PALOS DE MOGUER_23","label":"Terraza No especificado","color":"#66bb6a","size":8,"type":"Terraza"},{"id":"local_ARGANZUELA_PALOS DE MOGUER_34","label":"Local 34","color":"#45b7d1","size":10,"type":"Local"},{"id":"terraza_ARGANZUELA_PALOS DE MOGUER_34","label":"Terraza No especificado","color":"#66bb6a","size":8,"type":"Terraza"},{"id":"local_ARGANZUELA_PALOS DE MOGUER_56","label":"Local 56","color":"#45b7d1","size":10,"type":"Local"},{"id":"terraza_ARGANZUELA_PALOS DE MOGUER_56","label":"Terraza No especificado","color":"#66bb6a","size":8,"type":"Terraza"},{"id":"local_ARGANZUELA_PALOS DE MOGUER_59","label":"Local 59","color":"#45b7d1","size":10,"type":"Local"},{"id":"terraza_ARGANZUELA_PALOS DE MOGUER_59","label":"Terraza No especificado","color":"#66bb6a","size":8,"type":"Terraza"},{"id":"local_ARGANZUELA_PALOS DE MOGUER_6","label":"Local 6","color":"#45b7d1","size":10,"type":"Local"},{"id":"terraza_ARGANZUELA_PALOS DE MOGUER_6","label":"Terraza No especificado","color":"#66bb6a","size":8,"type":"Terraza"},{"id":"local_ARGANZUELA_PALOS DE MOGUER_17","label":"Local 17","color":"#45b7d1","size":10,"type":"Local"},{"id":"terraza_ARGANZUELA_PALOS DE MOGUER_17","label":"Terraza No especificado","color":"#66bb6a","size":8,"type":"Terraza"},{"id":"local_ARGANZUELA_PALOS DE MOGUER_11","label":"Local 11","color":"#45b7d1","size":10,"type":"Local"},{"id":"terraza_ARGANZUELA_PALOS DE MOGUER_11","label":"Terraza No especificado","color":"#66bb6a","size":8,"type":"Terraza"},{"id":"local_ARGANZUELA_PALOS DE MOGUER_39","label":"Local 39","color":"#45b7d1","size":10,"type":"Local"},{"id":"terraza_ARGANZUELA_PALOS DE MOGUER_39","label":"Terraza No especificado","color":"#66bb6a","size":8,"type":"Terraza"},{"id":"local_ARGANZUELA_PALOS DE MOGUER_8","label":"Local 8","color":"#45b7d1","size":10,"type":"Local"},{"id":"terraza_ARGANZUELA_PALOS DE MOGUER_8","label":"Terraza No especificado","color":"#66bb6a","size":8,"type":"Terraza"},{"id":"local_ARGANZUELA_PALOS DE MOGUER_5","label":"Local 5","color":"#45b7d1","size":10,"type":"Local"},{"id":"terraza_ARGANZUELA_PALOS DE MOGUER_5","label":"Terraza No especificado","color":"#66bb6a","size":8,"type":"Terraza"},{"id":"local_ARGANZUELA_PALOS DE MOGUER_13","label":"Local 13","color":"#45b7d1","size":10,"type":"Local"},{"id":"terraza_ARGANZUELA_PALOS DE MOGUER_13","label":"Terraza No especificado","color":"#66bb6a","size":8,"type":"Terraza"},{"id":"local_ARGANZUELA_PALOS DE MOGUER_57","label":"Local 57","color":"#45b7d1","size":10,"type":"Local"},{"id":"terraza_ARGANZUELA_PALOS DE MOGUER_57","label":"Terraza No especificado","color":"#66bb6a","size":8,"type":"Terraza"}]);
        const edges = new vis.DataSet([{"from":"distrito_ARGANZUELA","to":"barrio_ARGANZUELA_CHOPERA","label":"CONTIENE"},{"from":"barrio_ARGANZUELA_CHOPERA","to":"local_ARGANZUELA_CHOPERA_132","label":"TIENE_LOCAL"},{"from":"local_ARGANZUELA_CHOPERA_132","to":"terraza_ARGANZUELA_CHOPERA_132","label":"TIENE_TERRAZA"},{"from":"barrio_ARGANZUELA_CHOPERA","to":"local_ARGANZUELA_CHOPERA_11","label":"TIENE_LOCAL"},{"from":"local_ARGANZUELA_CHOPERA_11","to":"terraza_ARGANZUELA_CHOPERA_11","label":"TIENE_TERRAZA"},{"from":"barrio_ARGANZUELA_CHOPERA","to":"local_ARGANZUELA_CHOPERA_15","label":"TIENE_LOCAL"},{"from":"local_ARGANZUELA_CHOPERA_15","to":"terraza_ARGANZUELA_CHOPERA_15","label":"TIENE_TERRAZA"},{"from":"barrio_ARGANZUELA_CHOPERA","to":"local_ARGANZUELA_CHOPERA_29","label":"TIENE_LOCAL"},{"from":"local_ARGANZUELA_CHOPERA_29","to":"terraza_ARGANZUELA_CHOPERA_29","label":"TIENE_TERRAZA"},{"from":"barrio_ARGANZUELA_CHOPERA","to":"local_ARGANZUELA_CHOPERA_1","label":"TIENE_LOCAL"},{"from":"local_ARGANZUELA_CHOPERA_1","to":"terraza_ARGANZUELA_CHOPERA_1","label":"TIENE_TERRAZA"},{"from":"barrio_ARGANZUELA_CHOPERA","to":"local_ARGANZUELA_CHOPERA_75","label":"TIENE_LOCAL"},{"from":"local_ARGANZUELA_CHOPERA_75","to":"terraza_ARGANZUELA_CHOPERA_75","label":"TIENE_TERRAZA"},{"from":"barrio_ARGANZUELA_CHOPERA","to":"local_ARGANZUELA_CHOPERA_18","label":"TIENE_LOCAL"},{"from":"local_ARGANZUELA_CHOPERA_18","to":"terraza_ARGANZUELA_CHOPERA_18","label":"TIENE_TERRAZA"},{"from":"barrio_ARGANZUELA_CHOPERA","to":"local_ARGANZUELA_CHOPERA_2","label":"TIENE_LOCAL"},{"from":"local_ARGANZUELA_CHOPERA_2","to":"terraza_ARGANZUELA_CHOPERA_2","label":"TIENE_TERRAZA"},{"from":"barrio_ARGANZUELA_CHOPERA","to":"local_ARGANZUELA_CHOPERA_5","label":"TIENE_LOCAL"},{"from":"local_ARGANZUELA_CHOPERA_5","to":"terraza_ARGANZUELA_CHOPERA_5","label":"TIENE_TERRAZA"},{"from":"barrio_ARGANZUELA_CHOPERA","to":"local_ARGANZUELA_CHOPERA_53","label":"TIENE_LOCAL"},{"from":"local_ARGANZUELA_CHOPERA_53","to":"terraza_ARGANZUELA_CHOPERA_53","label":"TIENE_TERRAZA"},{"from":"barrio_ARGANZUELA_CHOPERA","to":"local_ARGANZUELA_CHOPERA_19","label":"TIENE_LOCAL"},{"from":"local_ARGANZUELA_CHOPERA_19","to":"terraza_ARGANZUELA_CHOPERA_19","label":"TIENE_TERRAZA"},{"from":"barrio_ARGANZUELA_CHOPERA","to":"local_ARGANZUELA_CHOPERA_124","label":"TIENE_LOCAL"},{"from":"local_ARGANZUELA_CHOPERA_124","to":"terraza_ARGANZUELA_CHOPERA_124","label":"TIENE_TERRAZA"},{"from":"barrio_ARGANZUELA_CHOPERA","to":"local_ARGANZUELA_CHOPERA_134","label":"TIENE_LOCAL"},{"from":"local_ARGANZUELA_CHOPERA_134","to":"terraza_ARGANZUELA_CHOPERA_134","label":"TIENE_TERRAZA"},{"from":"barrio_ARGANZUELA_CHOPERA","to":"local_ARGANZUELA_CHOPERA_65","label":"TIENE_LOCAL"},{"from":"local_ARGANZUELA_CHOPERA_65","to":"terraza_ARGANZUELA_CHOPERA_65","label":"TIENE_TERRAZA"},{"from":"barrio_ARGANZUELA_CHOPERA","to":"local_ARGANZUELA_CHOPERA_42","label":"TIENE_LOCAL"},{"from":"local_ARGANZUELA_CHOPERA_42","to":"terraza_ARGANZUELA_CHOPERA_42","label":"TIENE_TERRAZA"},{"from":"barrio_ARGANZUELA_CHOPERA","to":"local_ARGANZUELA_CHOPERA_21","label":"TIENE_LOCAL"},{"from":"local_ARGANZUELA_CHOPERA_21","to":"terraza_ARGANZUELA_CHOPERA_21","label":"TIENE_TERRAZA"},{"from":"distrito_ARGANZUELA","to":"barrio_ARGANZUELA_PALOS DE MOGUER","label":"CONTIENE"},{"from":"barrio_ARGANZUELA_PALOS DE MOGUER","to":"local_ARGANZUELA_PALOS DE MOGUER_28","label":"TIENE_LOCAL"},{"from":"local_ARGANZUELA_PALOS DE MOGUER_28","to":"terraza_ARGANZUELA_PALOS DE MOGUER_28","label":"TIENE_TERRAZA"},{"from":"barrio_ARGANZUELA_PALOS DE MOGUER","to":"local_ARGANZUELA_PALOS DE MOGUER_65","label":"TIENE_LOCAL"},{"from":"local_ARGANZUELA_PALOS DE MOGUER_65","to":"terraza_ARGANZUELA_PALOS DE MOGUER_65","label":"TIENE_TERRAZA"},{"from":"barrio_ARGANZUELA_PALOS DE MOGUER","to":"local_ARGANZUELA_PALOS DE MOGUER_10","label":"TIENE_LOCAL"},{"from":"local_ARGANZUELA_PALOS DE MOGUER_10","to":"terraza_ARGANZUELA_PALOS DE MOGUER_10","label":"TIENE_TERRAZA"},{"from":"barrio_ARGANZUELA_PALOS DE MOGUER","to":"local_ARGANZUELA_PALOS DE MOGUER_4","label":"TIENE_LOCAL"},{"from":"local_ARGANZUELA_PALOS DE MOGUER_4","to":"terraza_ARGANZUELA_PALOS DE MOGUER_4","label":"TIENE_TERRAZA"},{"from":"barrio_ARGANZUELA_PALOS DE MOGUER","to":"local_ARGANZUELA_PALOS DE MOGUER_63","label":"TIENE_LOCAL"},{"from":"local_ARGANZUELA_PALOS DE MOGUER_63","to":"terraza_ARGANZUELA_PALOS DE MOGUER_63","label":"TIENE_TERRAZA"},{"from":"barrio_ARGANZUELA_PALOS DE MOGUER","to":"local_ARGANZUELA_PALOS DE MOGUER_2","label":"TIENE_LOCAL"},{"from":"local_ARGANZUELA_PALOS DE MOGUER_2","to":"terraza_ARGANZUELA_PALOS DE MOGUER_2","label":"TIENE_TERRAZA"},{"from":"barrio_ARGANZUELA_PALOS DE MOGUER","to":"local_ARGANZUELA_PALOS DE MOGUER_12","label":"TIENE_LOCAL"},{"from":"local_ARGANZUELA_PALOS DE MOGUER_12","to":"terraza_ARGANZUELA_PALOS DE MOGUER_12","label":"TIENE_TERRAZA"},{"from":"barrio_ARGANZUELA_PALOS DE MOGUER","to":"local_ARGANZUELA_PALOS DE MOGUER_14","label":"TIENE_LOCAL"},{"from":"local_ARGANZUELA_PALOS DE MOGUER_14","to":"terraza_ARGANZUELA_PALOS DE MOGUER_14","label":"TIENE_TERRAZA"},{"from":"barrio_ARGANZUELA_PALOS DE MOGUER","to":"local_ARGANZUELA_PALOS DE MOGUER_50","label":"TIENE_LOCAL"},{"from":"local_ARGANZUELA_PALOS DE MOGUER_50","to":"terraza_ARGANZUELA_PALOS DE MOGUER_50","label":"TIENE_TERRAZA"},{"from":"barrio_ARGANZUELA_PALOS DE MOGUER","to":"local_ARGANZUELA_PALOS DE MOGUER_32","label":"TIENE_LOCAL"},{"from":"local_ARGANZUELA_PALOS DE MOGUER_32","to":"terraza_ARGANZUELA_PALOS DE MOGUER_32","label":"TIENE_TERRAZA"},{"from":"barrio_ARGANZUELA_PALOS DE MOGUER","to":"local_ARGANZUELA_PALOS DE MOGUER_38","label":"TIENE_LOCAL"},{"from":"local_ARGANZUELA_PALOS DE MOGUER_38","to":"terraza_ARGANZUELA_PALOS DE MOGUER_38","label":"TIENE_TERRAZA"},{"from":"barrio_ARGANZUELA_PALOS DE MOGUER","to":"local_ARGANZUELA_PALOS DE MOGUER_23","label":"TIENE_LOCAL"},{"from":"local_ARGANZUELA_PALOS DE MOGUER_23","to":"terraza_ARGANZUELA_PALOS DE MOGUER_23","label":"TIENE_TERRAZA"},{"from":"barrio_ARGANZUELA_PALOS DE MOGUER","to":"local_ARGANZUELA_PALOS DE MOGUER_34","label":"TIENE_LOCAL"},{"from":"local_ARGANZUELA_PALOS DE MOGUER_34","to":"terraza_ARGANZUELA_PALOS DE MOGUER_34","label":"TIENE_TERRAZA"},{"from":"barrio_ARGANZUELA_PALOS DE MOGUER","to":"local_ARGANZUELA_PALOS DE MOGUER_56","label":"TIENE_LOCAL"},{"from":"local_ARGANZUELA_PALOS DE MOGUER_56","to":"terraza_ARGANZUELA_PALOS DE MOGUER_56","label":"TIENE_TERRAZA"},{"from":"barrio_ARGANZUELA_PALOS DE MOGUER","to":"local_ARGANZUELA_PALOS DE MOGUER_59","label":"TIENE_LOCAL"},{"from":"local_ARGANZUELA_PALOS DE MOGUER_59","to":"terraza_ARGANZUELA_PALOS DE MOGUER_59","label":"TIENE_TERRAZA"},{"from":"barrio_ARGANZUELA_PALOS DE MOGUER","to":"local_ARGANZUELA_PALOS DE MOGUER_6","label":"TIENE_LOCAL"},{"from":"local_ARGANZUELA_PALOS DE MOGUER_6","to":"terraza_ARGANZUELA_PALOS DE MOGUER_6","label":"TIENE_TERRAZA"},{"from":"barrio_ARGANZUELA_PALOS DE MOGUER","to":"local_ARGANZUELA_PALOS DE MOGUER_17","label":"TIENE_LOCAL"},{"from":"local_ARGANZUELA_PALOS DE MOGUER_17","to":"terraza_ARGANZUELA_PALOS DE MOGUER_17","label":"TIENE_TERRAZA"},{"from":"barrio_ARGANZUELA_PALOS DE MOGUER","to":"local_ARGANZUELA_PALOS DE MOGUER_11","label":"TIENE_LOCAL"},{"from":"local_ARGANZUELA_PALOS DE MOGUER_11","to":"terraza_ARGANZUELA_PALOS DE MOGUER_11","label":"TIENE_TERRAZA"},{"from":"barrio_ARGANZUELA_PALOS DE MOGUER","to":"local_ARGANZUELA_PALOS DE MOGUER_39","label":"TIENE_LOCAL"},{"from":"local_ARGANZUELA_PALOS DE MOGUER_39","to":"terraza_ARGANZUELA_PALOS DE MOGUER_39","label":"TIENE_TERRAZA"},{"from":"barrio_ARGANZUELA_PALOS DE MOGUER","to":"local_ARGANZUELA_PALOS DE MOGUER_8","label":"TIENE_LOCAL"},{"from":"local_ARGANZUELA_PALOS DE MOGUER_8","to":"terraza_ARGANZUELA_PALOS DE MOGUER_8","label":"TIENE_TERRAZA"},{"from":"barrio_ARGANZUELA_PALOS DE MOGUER","to":"local_ARGANZUELA_PALOS DE MOGUER_5","label":"TIENE_LOCAL"},{"from":"local_ARGANZUELA_PALOS DE MOGUER_5","to":"terraza_ARGANZUELA_PALOS DE MOGUER_5","label":"TIENE_TERRAZA"},{"from":"barrio_ARGANZUELA_PALOS DE MOGUER","to":"local_ARGANZUELA_PALOS DE MOGUER_13","label":"TIENE_LOCAL"},{"from":"local_ARGANZUELA_PALOS DE MOGUER_13","to":"terraza_ARGANZUELA_PALOS DE MOGUER_13","label":"TIENE_TERRAZA"},{"from":"barrio_ARGANZUELA_PALOS DE MOGUER","to":"local_ARGANZUELA_PALOS DE MOGUER_57","label":"TIENE_LOCAL"},{"from":"local_ARGANZUELA_PALOS DE MOGUER_57","to":"terraza_ARGANZUELA_PALOS DE MOGUER_57","label":"TIENE_TERRAZA"}]);
        
        const data = { nodes: nodes, edges: edges };
        
        const options = {
            nodes: {
                shape: 'dot',
                font: { size: 12 },
                borderWidth: 2,
                shadow: true
            },
            edges: {
                width: 2,
                color: { color: '#848484' },
                arrows: { to: { enabled: true, scaleFactor: 1 } },
                font: { size: 10 },
                smooth: { type: 'continuous' }
            },
            physics: {
                enabled: true,
                stabilization: { iterations: 200 }
            },
            interaction: {
                hover: true,
                tooltipDelay: 200
            }
        };
        
        const container = document.getElementById('network');
        
        // Limpiar contenedor completamente
        container.innerHTML = '';
        
        // Crear nuevo grafo y guardarlo globalmente
        window.grafoActual = new vis.Network(container, data, options);
        
        console.log('Grafo creado exitosamente con', 81, 'nodos y', 80, 'relaciones');

        // Información al hacer clic
        window.grafoActual.on('click', function(params) {
            if (params.nodes.length > 0) {
                const nodeId = params.nodes[0];
                const node = nodes.get(nodeId);
                alert('Tipo: ' + node.type + '\nNombre: ' + node.label);
            }
        });
    </script>
</body>
</html>